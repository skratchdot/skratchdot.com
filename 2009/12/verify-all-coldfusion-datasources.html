<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Verify All ColdFusion DataSources &raquo; skratchdot.com</title>
    <!--
	  _                 _              _       _         _       _                 _
	 | |               | |            | |     | |       | |     | |               | |
	/ __)           ___| | ___ __ __ _| |_ ___| |__   __| | ___ | |_             / __)
	\__ \          / __| |/ / '__/ _` | __/ __| '_ \ / _` |/ _ \| __|            \__ \
	(   /          \__ \   <| | | (_| | || (__| | | | (_| | (_) | |_ _           (   /
	 |_|           |___/_|\_\_|  \__,_|\__\___|_| |_|\__,_|\___/ \__(_)           |_|

	                   wasting bytes with ascii art since [random date]
	-->
    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="/images/favicons/apple-touch-icon-57x57.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="/images/favicons/apple-touch-icon-114x114.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="/images/favicons/apple-touch-icon-72x72.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="/images/favicons/apple-touch-icon-60x60.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="/images/favicons/apple-touch-icon-120x120.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="/images/favicons/apple-touch-icon-76x76.png"
    />
    <meta name="apple-mobile-web-app-title" content="skratchdot" />
    <link
      rel="icon"
      type="image/png"
      href="/images/favicons/favicon-96x96.png"
      sizes="96x96"
    />
    <link
      rel="icon"
      type="image/png"
      href="/images/favicons/favicon-16x16.png"
      sizes="16x16"
    />
    <link
      rel="icon"
      type="image/png"
      href="/images/favicons/favicon-32x32.png"
      sizes="32x32"
    />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="application-name" content="skratchdot" />
    <meta name="generator" content="Jekyll" />
    <link
      rel="alternate"
      type="application/atom+xml"
      title="Skratchdot (Atom 0.3)"
      href="/atom.xml"
    />
    <!-- Stylesheets -->
    <link
      rel="stylesheet"
      type="text/css"
      media="all"
      href="/css/html5reset-1.6.1.css?201804141145"
    />
    <link
      rel="stylesheet"
      type="text/css"
      media="screen"
      href="/css/style.css?201804141145"
    />
    <link
      rel="stylesheet"
      type="text/css"
      media="screen"
      href="/css/pygments.css?201804141145"
    />
    <!--[if lt IE 9]>
      <script
        type="text/javascript"
        src="//html5shiv.googlecode.com/svn/trunk/html5.js"
      ></script>
    <![endif]-->
    <script
      type="text/javascript"
      src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"
    ></script>
    <!-- Allow $.getScript() calls to be cached -->
    <script type="text/javascript">
      $.ajaxSetup({
        cache: true,
      });
    </script>
  </head>
  <body>
    <div class="hrRed"></div>
    <div class="hrBlack"></div>
    <header class="oneColumn">
      <h1><a href="/">&#91;skratchdot<span>.</span>&#93;</a></h1>
    </header>
    <nav id="mainNav" class="oneColumn">
      <ul>
        <li>
          <a title="Home" href="/"><span>&#91;</span>Home<span>&#93;</span></a>
        </li>
        <!--<li><a title="Browse" href="/browse/"><span>&#91;</span>Browse<span>&#93;</span></a></li>-->
        <li>
          <a title="Projects" href="/projects/"
            ><span>&#91;</span>Projects<span>&#93;</span></a
          >
        </li>
        <li>
          <a title="Contact" href="/contact/"
            ><span>&#91;</span>Contact<span>&#93;</span></a
          >
        </li>
      </ul>
    </nav>
    <!-- Social Buttons -->
    <div id="share-buttons-container">
      <ul class="share-buttons">
        <li>
          <a
            href="https://www.facebook.com/sharer/sharer.php?u=https://www.skratchdot.com/2009/12/verify-all-coldfusion-datasources&t=Verify%20All%20ColdFusion%20DataSources"
            title="Share on Facebook"
            target="_blank"
            ><img alt="Share on Facebook" src="/images/social/Facebook.png"
          /></a>
        </li>
        <li>
          <a
            href="https://twitter.com/intent/tweet?source=https://www.skratchdot.com/2009/12/verify-all-coldfusion-datasources&text=Verify%20All%20ColdFusion%20DataSources:%20https://www.skratchdot.com/2009/12/verify-all-coldfusion-datasources&via=skratchdot"
            target="_blank"
            title="Tweet"
            ><img alt="Tweet" src="/images/social/Twitter.png"
          /></a>
        </li>
        <li>
          <a
            href="https://plus.google.com/share?url=https://www.skratchdot.com/2009/12/verify-all-coldfusion-datasources"
            target="_blank"
            title="Share on Google+"
            ><img alt="Share on Google+" src="/images/social/Google+.png"
          /></a>
        </li>
        <li>
          <a
            href="https://www.tumblr.com/share?v=3&u=https://www.skratchdot.com/2009/12/verify-all-coldfusion-datasources&t=Verify%20All%20ColdFusion%20DataSources&s="
            target="_blank"
            title="Post to Tumblr"
            ><img alt="Post to Tumblr" src="/images/social/Tumblr.png"
          /></a>
        </li>
        <li>
          <a
            href="https://pinterest.com/pin/create/button/?url=https://www.skratchdot.com/2009/12/verify-all-coldfusion-datasources&description=Recently%20I%20was%20asked%20how%20to%20programmatically%20verify%20ColdFusion%20DataSources.%20I%20came%20up%20with%20a%20few%20methods%20of%20doing%20so.%20Each%20have%20their%20pros%20and%20cons.%20Method%20#1%20:%20Try/Catch%20using%20cfquery%20PROS:%20Can%20test%20for%20%E2%80%9Cdatasource%E2%80%9D%20specific%20behavior%20by%20using%20a%20custom%20cfquery%20(ie.%20%E2%80%9CSELECT%201%E2%80%9D%20vs.%20%E2%80%9CSELECT%20name..."
            target="_blank"
            title="Pin it"
            ><img alt="Pin it" src="/images/social/Pinterest.png"
          /></a>
        </li>
        <li>
          <a
            href="https://getpocket.com/save?url=https://www.skratchdot.com/2009/12/verify-all-coldfusion-datasources&title=Verify%20All%20ColdFusion%20DataSources"
            target="_blank"
            title="Add to Pocket"
            ><img alt="Add to Pocket" src="/images/social/Pocket.png"
          /></a>
        </li>
        <li>
          <a
            href="https://www.reddit.com/submit?url=https://www.skratchdot.com/2009/12/verify-all-coldfusion-datasources&title=Verify%20All%20ColdFusion%20DataSources"
            target="_blank"
            title="Submit to Reddit"
            ><img alt="Submit to Reddit" src="/images/social/Reddit.png"
          /></a>
        </li>
        <li>
          <a
            href="https://www.linkedin.com/shareArticle?mini=true&url=https://www.skratchdot.com/2009/12/verify-all-coldfusion-datasources&title=Verify%20All%20ColdFusion%20DataSources&summary=Recently%20I%20was%20asked%20how%20to%20programmatically%20verify%20ColdFusion%20DataSources.%20I%20came%20up%20with%20a%20few%20methods%20of%20doing%20so.%20Each%20have%20their%20pros%20and%20cons.%20Method%20#1%20:%20Try/Catch%20using%20cfquery%20PROS:%20Can%20test%20for%20%E2%80%9Cdatasource%E2%80%9D%20specific%20behavior%20by%20using%20a%20custom%20cfquery%20(ie.%20%E2%80%9CSELECT%201%E2%80%9D%20vs.%20%E2%80%9CSELECT%20name...&source=https://www.skratchdot.com/2009/12/verify-all-coldfusion-datasources"
            target="_blank"
            title="Share on LinkedIn"
            ><img alt="Share on LinkedIn" src="/images/social/LinkedIn.png"
          /></a>
        </li>
        <li>
          <a
            href="mailto:?subject=Verify%20All%20ColdFusion%20DataSources&body=Recently%20I%20was%20asked%20how%20to%20programmatically%20verify%20ColdFusion%20DataSources.%20I%20came%20up%20with%20a%20few%20methods%20of%20doing%20so.%20Each%20have%20their%20pros%20and%20cons.%20Method%20#1%20:%20Try/Catch%20using%20cfquery%20PROS:%20Can%20test%20for%20%E2%80%9Cdatasource%E2%80%9D%20specific%20behavior%20by%20using%20a%20custom%20cfquery%20(ie.%20%E2%80%9CSELECT%201%E2%80%9D%20vs.%20%E2%80%9CSELECT%20name...:%20https://www.skratchdot.com/2009/12/verify-all-coldfusion-datasources"
            title="Send email"
            ><img alt="Send email" src="/images/social/Email.png"
          /></a>
        </li>
      </ul>
    </div>

    <section class="oneColumn">
      <article>
        <div class="title">
          <div class="date">
            <div>
              <span>Dec</span>
              <span>12</span>
            </div>
            <div>
              <span>2009</span>
            </div>
          </div>
          <h2 class="title">
            <a
              href="/2009/12/verify-all-coldfusion-datasources"
              rel="bookmark"
              title="Permanent Link to Verify All ColdFusion DataSources"
              >Verify All ColdFusion DataSources</a
            >
          </h2>
          <div class="info">
            <div class="category">
              <a
                href="/category/ColdFusion"
                title="View all posts in ColdFusion"
                >ColdFusion</a
              >

              &nbsp;
            </div>

            <div class="pl-comments comments">
              <a
                href="#disqus_thread"
                data-disqus-identifier="/2009/12/verify-all-coldfusion-datasources"
              ></a>
            </div>
          </div>
          <div class="clearfix">&nbsp;</div>
        </div>
        <div class="entry">
          <p>
            Recently I was asked how to programmatically verify ColdFusion
            DataSources. I came up with a few methods of doing so. Each have
            their pros and cons.
          </p>

          <h3 id="method-1--trycatch-using-cfquery">
            Method #1 : Try/Catch using cfquery
          </h3>

          <p><strong>PROS:</strong></p>

          <ul>
            <li>
              Can test for “datasource” specific behavior by using a custom
              cfquery (ie. <strong>“SELECT 1”</strong> vs.
              <strong>“SELECT name FROM Customers”</strong>). If you do this,
              the query may not work for other datasources, thereby not actually
              testing the validity of the datasource (a CON).
            </li>
          </ul>

          <p><strong>CONS:</strong></p>

          <ul>
            <li>Uses try/catch.</li>
            <li>
              Does not work with all datasources. I don’t know of a cfquery that
              will work for all datasources / DBs / etc
            </li>
          </ul>

          <p><strong>NOTES:</strong></p>

          <p>
            This is my least favorite, because I couldn’t come up with a cfquery
            to test <em>all</em> datasources. It will work for some datasources,
            but not all.
          </p>

          <p><strong>SOURCE:</strong></p>

          <figure class="highlight">
            <pre><code class="language-cfm" data-lang="cfm"><span></span><span class="lineno"> 1 </span><span class="nb">&lt;cffunction</span> <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;verifyDsnList1&quot;</span> <span class="nv">output</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="nv">returntype</span><span class="o">=</span><span class="s2">&quot;void&quot;</span><span class="nb">&gt;</span>
<span class="lineno"> 2 </span>	<span class="nb">&lt;cfargument</span> <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;list&quot;</span> <span class="nv">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span> <span class="k">required</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno"> 3 </span>	<span class="nb">&lt;cfargument</span> <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;delimiter&quot;</span> <span class="nv">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span> <span class="k">required</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="k">default</span><span class="o">=</span><span class="s2">&quot;,&quot;</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno"> 4 </span>	<span class="nb">&lt;cfset</span> <span class="k">var</span> <span class="nv">local</span> <span class="o">=</span> <span class="nf">StructNew</span><span class="p">()</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno"> 5 </span>	<span class="nb">&lt;cfoutput&gt;</span>
<span class="lineno"> 6 </span>		<span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
<span class="lineno"> 7 </span>		<span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;&lt;</span><span class="nt">u</span><span class="p">&gt;</span>veriftyDsnList1<span class="p">&lt;/</span><span class="nt">u</span><span class="p">&gt;&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>
<span class="lineno"> 8 </span>		<span class="nb">&lt;cfloop</span> <span class="nv">list</span><span class="o">=</span><span class="s2">&quot;</span><span class="s s-Interp">#arguments.list#</span><span class="s2">&quot;</span> <span class="nv">index</span><span class="o">=</span><span class="s2">&quot;local.currentName&quot;</span><span class="nb">&gt;</span>
<span class="lineno"> 9 </span>			<span class="nb">&lt;cftry&gt;</span>
<span class="lineno">10 </span>				<span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
<span class="lineno">11 </span>				<span class="p">&lt;</span><span class="nt">cfquery</span> <span class="na">name</span><span class="o">=</span><span class="s">&quot;local.qVerifyDatasource&quot;</span> <span class="na">datasource</span><span class="o">=</span><span class="s">&quot;#local.currentName#&quot;</span><span class="p">&gt;</span>
<span class="lineno">12 </span>					SELECT 1
<span class="lineno">13 </span>				<span class="p">&lt;/</span><span class="nt">cfquery</span><span class="p">&gt;</span>
<span class="lineno">14 </span>				<span class="nb">&lt;cfif</span> <span class="nv">local.qVerifyDatasource.RecordCount</span> <span class="o">gt</span> <span class="m">0</span><span class="nb">&gt;</span>
<span class="lineno">15 </span>					DATASOURCE: <span class="p">#</span><span class="nv">local.currentName</span><span class="p">#</span> [VERIFIED=true]
<span class="lineno">16 </span>				<span class="nb">&lt;cfelse&gt;</span>
<span class="lineno">17 </span>					DATASOURCE: <span class="p">#</span><span class="nv">local.currentName</span><span class="p">#</span> [VERIFIED=false]
<span class="lineno">18 </span>				<span class="nb">&lt;/cfif&gt;</span>
<span class="lineno">19 </span>				<span class="nb">&lt;cfcatch&gt;</span>
<span class="lineno">20 </span>					DATASOURCE: <span class="p">#</span><span class="nv">local.currentName</span><span class="p">#</span> [VERIFIED=false] [ERROR: <span class="p">#</span><span class="nv">cfcatch.message</span><span class="p">#</span>]
<span class="lineno">21 </span>				<span class="nb">&lt;/cfcatch&gt;</span>
<span class="lineno">22 </span>			<span class="nb">&lt;/cftry&gt;</span>
<span class="lineno">23 </span>		<span class="nb">&lt;/cfloop&gt;</span>
<span class="lineno">24 </span>		<span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
<span class="lineno">25 </span>	<span class="nb">&lt;/cfoutput&gt;</span>
<span class="lineno">26 </span><span class="nb">&lt;/cffunction&gt;</span></code></pre>
          </figure>

          <h3
            id="method-2-trycatch-using-the-datasourceservice-verifydatasource-method"
          >
            Method #2: Try/Catch using the DataSourceService verifyDatasource()
            method.
          </h3>

          <p><strong>PROS:</strong></p>

          <ul>
            <li>Will work for all datasources.</li>
            <li>
              Shows “error” specific messaging that might help debug why a
              datasource isn’t working.
            </li>
          </ul>

          <p><strong>CONS:</strong></p>

          <ul>
            <li>Uses try/catch.</li>
          </ul>

          <p><strong>SOURCE:</strong></p>

          <figure class="highlight">
            <pre><code class="language-cfm" data-lang="cfm"><span></span><span class="lineno"> 1 </span><span class="nb">&lt;cffunction</span> <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;verifyDsnList2&quot;</span> <span class="nv">output</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="nv">returntype</span><span class="o">=</span><span class="s2">&quot;void&quot;</span><span class="nb">&gt;</span>
<span class="lineno"> 2 </span>	<span class="nb">&lt;cfargument</span> <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;list&quot;</span> <span class="nv">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span> <span class="k">required</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno"> 3 </span>	<span class="nb">&lt;cfargument</span> <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;delimiter&quot;</span> <span class="nv">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span> <span class="k">required</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="k">default</span><span class="o">=</span><span class="s2">&quot;,&quot;</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno"> 4 </span>	<span class="nb">&lt;cfset</span> <span class="k">var</span> <span class="nv">local</span> <span class="o">=</span> <span class="nf">StructNew</span><span class="p">()</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno"> 5 </span>	<span class="nb">&lt;cfset</span> <span class="nv">local.dsService</span> <span class="o">=</span> <span class="nf">CreateObject</span><span class="p">(</span><span class="s2">&quot;java&quot;</span><span class="p">,</span> <span class="s2">&quot;coldfusion.server.ServiceFactory&quot;</span><span class="p">).</span><span class="nv">DataSourceService</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno"> 6 </span>	<span class="nb">&lt;cfoutput&gt;</span>
<span class="lineno"> 7 </span>		<span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
<span class="lineno"> 8 </span>		<span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;&lt;</span><span class="nt">u</span><span class="p">&gt;</span>veriftyDsnList2<span class="p">&lt;/</span><span class="nt">u</span><span class="p">&gt;&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>
<span class="lineno"> 9 </span>		<span class="nb">&lt;cfloop</span> <span class="nv">list</span><span class="o">=</span><span class="s2">&quot;</span><span class="s s-Interp">#arguments.list#</span><span class="s2">&quot;</span> <span class="nv">index</span><span class="o">=</span><span class="s2">&quot;local.currentName&quot;</span><span class="nb">&gt;</span>
<span class="lineno">10 </span>			<span class="nb">&lt;cftry&gt;</span>
<span class="lineno">11 </span>				<span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
<span class="lineno">12 </span>				<span class="nb">&lt;cfif</span> <span class="nf">local.dsService.verifyDatasource</span><span class="p">(</span><span class="nv">local.currentName</span><span class="p">)</span><span class="nb">&gt;</span>
<span class="lineno">13 </span>					DATASOURCE: <span class="p">#</span><span class="nv">local.currentName</span><span class="p">#</span> [VERIFIED=true]
<span class="lineno">14 </span>				<span class="nb">&lt;cfelse&gt;</span>
<span class="lineno">15 </span>					DATASOURCE: <span class="p">#</span><span class="nv">local.currentName</span><span class="p">#</span> [VERIFIED=false]
<span class="lineno">16 </span>				<span class="nb">&lt;/cfif&gt;</span>
<span class="lineno">17 </span>				<span class="nb">&lt;cfcatch&gt;</span>
<span class="lineno">18 </span>					DATASOURCE: <span class="p">#</span><span class="nv">local.currentName</span><span class="p">#</span> [VERIFIED=false] [ERROR: <span class="p">#</span><span class="nv">cfcatch.message</span><span class="p">#</span>]
<span class="lineno">19 </span>				<span class="nb">&lt;/cfcatch&gt;</span>
<span class="lineno">20 </span>			<span class="nb">&lt;/cftry&gt;</span>
<span class="lineno">21 </span>		<span class="nb">&lt;/cfloop&gt;</span>
<span class="lineno">22 </span>		<span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
<span class="lineno">23 </span>	<span class="nb">&lt;/cfoutput&gt;</span>
<span class="lineno">24 </span><span class="nb">&lt;/cffunction&gt;</span></code></pre>
          </figure>

          <h3 id="method-3-admin-api-verifydsn-call">
            Method #3: Admin API verifyDSN() call
          </h3>

          <p><strong>PROS:</strong></p>

          <ul>
            <li>Will work for all datasources.</li>
            <li>Doesn’t use try/catch.</li>
          </ul>

          <p><strong>CONS:</strong></p>

          <ul>
            <li>
              Need to pass in cfide password. This should never be hardcoded, or
              kept in plain text.
            </li>
            <li>
              Will never output “error” specific text (only ever displays true
              or false).
            </li>
          </ul>

          <p><strong>SOURCE:</strong></p>

          <figure class="highlight">
            <pre><code class="language-cfm" data-lang="cfm"><span></span><span class="lineno"> 1 </span><span class="nb">&lt;cffunction</span> <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;verifyDsnList3&quot;</span> <span class="nv">output</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="nv">returntype</span><span class="o">=</span><span class="s2">&quot;void&quot;</span><span class="nb">&gt;</span>
<span class="lineno"> 2 </span>	<span class="nb">&lt;cfargument</span> <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;cfide_password&quot;</span> <span class="nv">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span> <span class="k">required</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno"> 3 </span>	<span class="nb">&lt;cfargument</span> <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;list&quot;</span> <span class="nv">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span> <span class="k">required</span><span class="o">=</span><span class="s2">&quot;true&quot;</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno"> 4 </span>	<span class="nb">&lt;cfargument</span> <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;delimiter&quot;</span> <span class="nv">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span> <span class="k">required</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="k">default</span><span class="o">=</span><span class="s2">&quot;,&quot;</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno"> 5 </span>	<span class="nb">&lt;cfset</span> <span class="k">var</span> <span class="nv">local</span> <span class="o">=</span> <span class="nf">StructNew</span><span class="p">()</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno"> 6 </span>	<span class="nb">&lt;cfset</span> <span class="nv">local.admin</span> <span class="o">=</span> <span class="nf">createObject</span><span class="p">(</span><span class="s2">&quot;component&quot;</span><span class="p">,</span><span class="s2">&quot;cfide.adminapi.administrator&quot;</span><span class="p">).</span><span class="nf">login</span><span class="p">(</span><span class="no">arguments</span><span class="p">.</span><span class="nv">cfide_password</span><span class="p">)</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno"> 7 </span>	<span class="nb">&lt;cfset</span> <span class="nv">local.dsObj</span> <span class="o">=</span> <span class="nf">createObject</span><span class="p">(</span><span class="s2">&quot;component&quot;</span><span class="p">,</span><span class="s2">&quot;cfide.adminapi.datasource&quot;</span><span class="p">)</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno"> 8 </span>	<span class="nb">&lt;cfoutput&gt;</span>
<span class="lineno"> 9 </span>		<span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
<span class="lineno">10 </span>		<span class="p">&lt;</span><span class="nt">b</span><span class="p">&gt;&lt;</span><span class="nt">u</span><span class="p">&gt;</span>veriftyDsnList3<span class="p">&lt;/</span><span class="nt">u</span><span class="p">&gt;&lt;/</span><span class="nt">b</span><span class="p">&gt;</span>
<span class="lineno">11 </span>		<span class="nb">&lt;cfloop</span> <span class="nv">list</span><span class="o">=</span><span class="s2">&quot;</span><span class="s s-Interp">#arguments.list#</span><span class="s2">&quot;</span> <span class="nv">index</span><span class="o">=</span><span class="s2">&quot;local.currentName&quot;</span><span class="nb">&gt;</span>
<span class="lineno">12 </span>			<span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
<span class="lineno">13 </span>			DATASOURCE: <span class="p">#</span><span class="nv">local.currentName</span><span class="p">#</span> [VERIFIED=<span class="p">#</span><span class="nf">local.dsObj.verifyDSN</span><span class="p">(</span><span class="nv">local.currentName</span><span class="p">)#</span>]
<span class="lineno">14 </span>		<span class="nb">&lt;/cfloop&gt;</span>
<span class="lineno">15 </span>		<span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
<span class="lineno">16 </span>	<span class="nb">&lt;/cfoutput&gt;</span>
<span class="lineno">17 </span><span class="nb">&lt;/cffunction&gt;</span></code></pre>
          </figure>

          <h3 id="helper-function">Helper Function:</h3>

          <p>
            Here’s a helper function that will return a sorted list of all
            configured datasource names:
          </p>

          <figure class="highlight">
            <pre><code class="language-cfm" data-lang="cfm"><span></span><span class="lineno">1 </span><span class="nb">&lt;cffunction</span> <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;getDatasourceList&quot;</span> <span class="nv">output</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="nv">returntype</span><span class="o">=</span><span class="s2">&quot;string&quot;</span><span class="nb">&gt;</span>
<span class="lineno">2 </span>	<span class="nb">&lt;cfargument</span> <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;sort_type&quot;</span> <span class="nv">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span> <span class="k">required</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="k">default</span><span class="o">=</span><span class="s2">&quot;textnocase&quot;</span> <span class="nv">hint</span><span class="o">=</span><span class="s2">&quot;Optional. See livedocs for ListSort().&quot;</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno">3 </span>	<span class="nb">&lt;cfargument</span> <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;sort_order&quot;</span> <span class="nv">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span> <span class="k">required</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="k">default</span><span class="o">=</span><span class="s2">&quot;asc&quot;</span> <span class="nv">hint</span><span class="o">=</span><span class="s2">&quot;Optional. See livedocs for ListSort().&quot;</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno">4 </span>	<span class="nb">&lt;cfargument</span> <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;delimiter&quot;</span> <span class="nv">type</span><span class="o">=</span><span class="s2">&quot;string&quot;</span> <span class="k">required</span><span class="o">=</span><span class="s2">&quot;false&quot;</span> <span class="k">default</span><span class="o">=</span><span class="s2">&quot;,&quot;</span> <span class="nv">hint</span><span class="o">=</span><span class="s2">&quot;Optional. See livedocs for ListSort().&quot;</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno">5 </span>	<span class="nb">&lt;cfset</span> <span class="k">var</span> <span class="nv">dsService</span> <span class="o">=</span> <span class="nf">CreateObject</span><span class="p">(</span><span class="s2">&quot;java&quot;</span><span class="p">,</span> <span class="s2">&quot;coldfusion.server.ServiceFactory&quot;</span><span class="p">).</span><span class="nv">DataSourceService</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno">6 </span>	<span class="nb">&lt;cfset</span> <span class="k">var</span> <span class="nv">sDatasources</span> <span class="o">=</span> <span class="nf">dsService.getDatasources</span><span class="p">()</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno">7 </span>	<span class="nb">&lt;cfset</span> <span class="k">var</span> <span class="nv">dsList</span> <span class="o">=</span> <span class="nf">StructKeyList</span><span class="p">(</span><span class="nv">sDatasources</span><span class="p">,</span> <span class="no">arguments</span><span class="p">.</span><span class="nv">delimiter</span><span class="p">)</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno">8 </span>	<span class="nb">&lt;cfreturn</span> <span class="nf">ListSort</span><span class="p">(</span><span class="nv">dsList</span><span class="p">,</span> <span class="no">arguments</span><span class="p">.</span><span class="nv">sort_type</span><span class="p">,</span> <span class="no">arguments</span><span class="p">.</span><span class="nv">sort_order</span><span class="p">,</span> <span class="no">arguments</span><span class="p">.</span><span class="nv">delimiter</span><span class="p">)</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno">9 </span><span class="nb">&lt;/cffunction&gt;</span></code></pre>
          </figure>

          <h3 id="testing-all-3-methods">Testing all 3 methods:</h3>

          <p>
            Here’s a small script to test all the functions from this post. For
            this to work correctly, you’ll need to set the correct CFIDE
            password.
          </p>

          <figure class="highlight">
            <pre><code class="language-cfm" data-lang="cfm"><span></span><span class="lineno"> 1 </span><span class="nb">&lt;cfset</span> <span class="nv">my_cfide_password</span> <span class="o">=</span> <span class="s2">&quot;admin&quot;</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno"> 2 </span><span class="nb">&lt;cfset</span> <span class="nv">my_datasource_list</span> <span class="o">=</span> <span class="nf">getDatasourceList</span><span class="p">()</span> <span class="o">/</span><span class="nb">&gt;</span>
<span class="lineno"> 3 </span>
<span class="lineno"> 4 </span><span class="nb">&lt;cfoutput&gt;</span>
<span class="lineno"> 5 </span>	<span class="p">#</span><span class="nf">verifyDsnList1</span><span class="p">(</span><span class="nv">my_datasource_list</span><span class="p">)#</span>
<span class="lineno"> 6 </span>	<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
<span class="lineno"> 7 </span>	<span class="p">#</span><span class="nf">verifyDsnList2</span><span class="p">(</span><span class="nv">my_datasource_list</span><span class="p">)#</span>
<span class="lineno"> 8 </span>	<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
<span class="lineno"> 9 </span>	<span class="p">#</span><span class="nf">verifyDsnList3</span><span class="p">(</span><span class="nv">my_cfide_password</span><span class="p">,</span> <span class="nv">my_datasource_list</span><span class="p">)#</span>
<span class="lineno">10 </span>	<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
<span class="lineno">11 </span><span class="nb">&lt;/cfoutput&gt;</span></code></pre>
          </figure>
        </div>

        <div class="tagList">
          Tagged with:

          <a href="/tag/adminapi" title="View all posts in adminapi"
            >adminapi</a
          >
          &bull;

          <a href="/tag/ColdFusion" title="View all posts in ColdFusion"
            >ColdFusion</a
          >
          &bull;

          <a href="/tag/datasources" title="View all posts in datasources"
            >datasources</a
          >
        </div>

        <div>
          <br />
          <div style="border-bottom: 1px dotted"></div>
          <br />
        </div>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
          var disqus_shortname = 'skratchdot';
          var disqus_identifier = '/2009/12/verify-all-coldfusion-datasources';
          var disqus_url =
            'https://www.skratchdot.com/2009/12/verify-all-coldfusion-datasources';

          $.getScript('//' + disqus_shortname + '.disqus.com/embed.js');
        </script>
        <noscript
          >Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript"
            >comments powered by Disqus.</a
          ></noscript
        >
        <a href="https://disqus.com" class="dsq-brlink"
          >blog comments powered by <span class="logo-disqus">Disqus</span></a
        >
      </article>
      <nav id="articlesNav">
        <div>
          <div class="newEntries">
            <a href="/2010/03/open-electribe-editor-v1-0-0-beta-released"
              >&laquo; Open Electribe Editor - v1.0.0.Beta Released</a
            >
          </div>
          <div class="oldEntries">
            <a href="/2009/12/esx-wave-organizer-faq"
              >ESX Wave Organizer FAQ &raquo;</a
            >
          </div>
        </div>
        <div class="homeEntries"><a href="/">HOME</a></div>
      </nav>
    </section>
    <div class="footerSpacer"><br /></div>
    <footer class="oneColumn">
      <div>
        Copyright &#169; 2018 <a href="/">skratchdot</a>
        <span class="hspace">&#x2022;</span>
        Validate:&#160;&#160;
        <a href="https://validator.w3.org/check/referer">HTML5</a>
        <span class="hspace">&#x2022;</span>
        <a class="noBorder" href="/atom.xml"
          ><img
            src="/images/feed-icon-14x14.png"
            alt="RSS/Atom Feed"
            style="top: 2px"
        /></a>
        <span class="hspace">&#x2022;</span>
        <div class="twitter-button">
          <a
            class="twitter-button-link"
            href="https://twitter.com/intent/user?screen_name=skratchdot"
            target="_blank"
            aria-label="Follow @skratchdot on Twitter"
            title="Follow @skratchdot on Twitter"
          >
            <i></i>
            <span> Follow <b>@skratchdot</b> </span>
          </a>
        </div>
      </div>
    </footer>
    <a href="https://github.com/skratchdot" class="github-corner">
      <svg
        width="80"
        height="80"
        viewBox="0 0 250 250"
        style="
          fill: #c80000;
          color: #000;
          position: absolute;
          top: 0;
          border: 0;
          right: 0;
        "
      >
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path
          d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
          fill="currentColor"
          style="transform-origin: 130px 106px"
          class="octo-arm"
        ></path>
        <path
          d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
          fill="currentColor"
          class="octo-body"
        ></path>
        <path d="M10,10 L115,115 L250,250 Z" stroke="black" stroke-width="6" />
      </svg>
    </a>
    <div id="homepage_link">
      <a href="/" style="border: 0"
        ><img src="/favicon.ico" alt="skratchdot" width="16" height="16"
      /></a>
    </div>
    <!-- Javascript -->
    <script
      type="text/javascript"
      src="/js/skratchdot.js?201804141145"
    ></script>
    <!-- Google Analytics -->
    <script type="text/javascript">
      (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        (i[r] =
          i[r] ||
          function () {
            (i[r].q = i[r].q || []).push(arguments);
          }),
          (i[r].l = 1 * new Date());
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(
        window,
        document,
        'script',
        '//www.google-analytics.com/analytics.js',
        'ga'
      );
      ga('create', 'UA-10768188-1', 'skratchdot.com');
      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script>

    <script type="text/javascript">
      var disqus_shortname = 'skratchdot';
      $.getScript('//' + disqus_shortname + '.disqus.com/count.js');
    </script>
  </body>
</html>
