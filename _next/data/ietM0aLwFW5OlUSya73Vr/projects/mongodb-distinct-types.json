{"pageProps":{"slug":"/projects/mongodb-distinct-types","filename":"_pages/projects/mongodb-distinct-types/index.md","html":"<h1 id=\"mongodb---distinct-typesjs\">MongoDB - distinct-types.js</h1>\n<p><a href=\"https://www.skratchdot.com/projects/mongodb-distinct-types/\">Project Page</a><br><a href=\"https://github.com/skratchdot/mongodb-distinct-types/\">Source Code</a><br><a href=\"https://github.com/skratchdot/mongodb-distinct-types/issues/\">Issues</a></p>\n<h2 id=\"description\">Description:</h2>\n<p>Similar to the db.myCollection.distinct() function, distinctTypes() will return\n\"types\" rather than \"values\". To accomplish this, it adds the following\nfunction to the DBCollection prototype:</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-title class_\">DBCollection</span>.<span class=\"hljs-property\"><span class=\"hljs-keyword\">prototype</span></span>.<span class=\"hljs-property\">distinctTypes</span> = <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">\n  keyString,\n  query,\n  limit,\n  skip\n</span>) {};\n</code></pre>\n<h2 id=\"usage\">Usage:</h2>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-comment\">// we hope this would return ['bson'] not ['bson','string']</span>\ndb.<span class=\"hljs-property\">users</span>.<span class=\"hljs-title function_\">distinctTypes</span>(<span class=\"hljs-string\">'name'</span>);\n\n<span class=\"hljs-comment\">// should return ['string']</span>\ndb.<span class=\"hljs-property\">users</span>.<span class=\"hljs-title function_\">distinctTypes</span>(<span class=\"hljs-string\">'name.first'</span>);\n\n<span class=\"hljs-comment\">// should return ['string']</span>\ndb.<span class=\"hljs-property\">users</span>.<span class=\"hljs-title function_\">distinctTypes</span>(<span class=\"hljs-string\">'address.phone'</span>);\n\n<span class=\"hljs-comment\">// only search documents that have { 'name.first' : 'Bob' }</span>\ndb.<span class=\"hljs-property\">users</span>.<span class=\"hljs-title function_\">distinctTypes</span>(<span class=\"hljs-string\">'address.phone'</span>, { <span class=\"hljs-string\">'name.first'</span>: <span class=\"hljs-string\">'Bob'</span> });\n\n<span class=\"hljs-comment\">// only search the first 10 documents</span>\ndb.<span class=\"hljs-property\">users</span>.<span class=\"hljs-title function_\">distinctTypes</span>(<span class=\"hljs-string\">'address.phone'</span>, {}, <span class=\"hljs-number\">10</span>);\n\n<span class=\"hljs-comment\">// only search documents 10-15</span>\ndb.<span class=\"hljs-property\">users</span>.<span class=\"hljs-title function_\">distinctTypes</span>(<span class=\"hljs-string\">'address.phone'</span>, {}, <span class=\"hljs-number\">10</span>, <span class=\"hljs-number\">5</span>);\n</code></pre>\n<h2 id=\"caveats\">Caveats:</h2>\n<p>By design, distinctTypes() returns 'bson' rather than 'object'.\nIt will return 'numberlong' rather than 'number', etc.</p>\n<h2 id=\"installation\">Installation:</h2>\n<p>Download: <a href=\"https://github.com/skratchdot/mongodb-distinct-types/raw/master/distinct-types.js\">distinct-types.js</a></p>\n<h3 id=\"option-1\">Option 1</h3>\n<p>Add this script to your .mongorc.js file.</p>\n<p>See: <a href=\"http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell#Overview-TheMongoDBInteractiveShell-.mongorc.js\">http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell#Overview-TheMongoDBInteractiveShell-.mongorc.js</a></p>\n<h3 id=\"option-2\">Option 2</h3>\n<p>Start the shell after executing this script</p>\n<pre><code class=\"hljs language-plaintext\">mongo --shell distinct-types.js\n</code></pre>\n","frontmatter":{"layout":"page","title":"MongoDB - distinct-types.js"}},"__N_SSG":true}