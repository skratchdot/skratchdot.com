{"pageProps":{"slug":"/projects/mesh","filename":"_pages/projects/mesh/index.md","html":"<h1 id=\"mesh---mongodb-extended-shell\">mesh - MongoDB Extended Shell</h1>\n<h2 id=\"description\">Description</h2>\n<p>mesh (<strong>M</strong>ongoDB <strong>E</strong>xtended <strong>Sh</strong>ell) is a javascript file that extends\nthe mongo shell. It includes some useful libraries, as well as new functions\nfor dealing with Mongo collections and queries.</p>\n<h2 id=\"installation\">Installation</h2>\n<p><strong>Download:</strong> <a href=\"https://github.com/skratchdot/mesh/raw/master/mesh.js\">mesh.js</a></p>\n<h4 id=\"option-1\">Option 1</h4>\n<p>Add this script to your .mongorc.js file.</p>\n<p><em>See:</em> <a href=\"http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell#Overview-TheMongoDBInteractiveShell-.mongorc.js\">http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell#Overview-TheMongoDBInteractiveShell-.mongorc.js</a></p>\n<p><em>Example .mongorc.js:</em></p>\n<pre><code class=\"hljs language-plaintext\">load('mesh.js');\nload('mesh.config.js');\n</code></pre>\n<h4 id=\"option-2\">Option 2</h4>\n<p>Start the shell after executing this script</p>\n<pre><code class=\"hljs language-plaintext\">mongo --shell mesh.js\n</code></pre>\n<h2 id=\"whats-included\">What's Included?</h2>\n<ul>\n<li><p><a href=\"http://documentcloud.github.com/underscore/\">underscore.js</a> - Underscore.js is a\nutility-belt library for JavaScript that provides support for the usual functional\nsuspects (each, map, reduce, filter...) without extending any core JavaScript objects.</p>\n</li>\n<li><p><a href=\"http://epeli.github.com/underscore.string/\">underscore.string.js</a> - Javascript lacks\ncomplete string manipulation operations. This an attempt to fill that gap.</p>\n</li>\n<li><p><a href=\"http://momentjs.com/\">moment.js</a> - A lightweight javascript date library for parsing,\nvalidating, manipulating, and formatting dates.</p>\n</li>\n<li><p><a href=\"https://github.com/jasondavies/science.js\">science.js</a> - Scientific and statistical computing\nin JavaScript.</p>\n</li>\n<li><p><a href=\"https://www.skratchdot.com/projects/mongodb-distinct2/\">distinct2()</a> - Similar to the built-in distinct()\nfunction, but with more capabilities.</p>\n</li>\n<li><p><a href=\"https://www.skratchdot.com/projects/mongodb-distinct-types/\">distinctTypes()</a> - Similar to the\ndb.myCollection.distinct() function, distinctTypes() will return \"types\" rather than \"values\".</p>\n</li>\n<li><p><a href=\"https://www.skratchdot.com/projects/mongodb-flatten/\">flatten()</a> - The flatten() function is a\nmapReduce that flattens documents into key/value pairs.</p>\n</li>\n<li><p><a href=\"https://www.skratchdot.com/projects/mongodb-schema/\">schema()</a> - A schema analysis tool for MongoDB.</p>\n</li>\n<li><p><a href=\"https://www.skratchdot.com/projects/mongodb-wild/\">wild()</a> - Adds a wildcard search to the mongodb shell.</p>\n</li>\n<li><p>A console wrapper so calls like console.log() and console.dir() don't error out</p>\n</li>\n<li><p>mesh.setPrompt(): a way to configure your prompt. Can set a default in mesh.config.js</p>\n</li>\n<li><p>mesh.keys(): will return all the \"global\" properties as a sorted array.</p>\n</li>\n<li><p><a href=\"https://github.com/douglascrockford/JSON-js\">JSON-js</a> - JSON.stringify() and JSON.parse()</p>\n</li>\n<li><p>mesh.oid() - a wrapper for ObjectId()</p>\n</li>\n<li><p>mesh.tid() - a wrapper for creating ObjectId values based on a timestamp</p>\n</li>\n<li><p>a few <a href=\"https://github.com/skratchdot/snippets/tree/master/underscore.js/\">underscore.js mixins</a></p>\n</li>\n<li><p><a href=\"https://github.com/skratchdot/mesh/blob/master/src/mongodb.insertArray.js\">DBCollection.insertArray()</a> - insert an array of objects into a collection</p>\n</li>\n<li><p><a href=\"https://github.com/skratchdot/mesh/blob/master/src/mesh.idrange.js\">mesh.idrange.js</a> - search collections\nfor documents with ids created between 2 datetimes</p>\n</li>\n<li><p><a href=\"https://github.com/skratchdot/mesh/blob/master/src/mesh.sizeinfo.js\">mesh.sizeinfo.js</a> - reports the\ncount/sum/avg/max/min of all bson sizes for the given query/collection.</p>\n</li>\n</ul>\n<h2 id=\"configuration\">Configuration</h2>\n<p>You can configure mesh by calling <strong>mesh.config(settings)</strong>. The benefit of keeping a config file,\nis that you won't lose your default settings when updating mesh. Currently, there are 2 config values:\ndefaultPrompt and aliases.</p>\n<p>You can create a file \"mesh.config.js\". It might look like:</p>\n<pre><code class=\"hljs language-plaintext\">mesh.config({\n        defaultPrompt : 4,        // 0-4 or a string\n        aliases : {                // can pass in a map of aliases.\n            't' : 'mesh.tid',    // t() is an alias for mesh.tid()\n            'o' : 'ObjectId',    // o() is an alias for ObjectId()\n            'm' : 'mesh'        // m is an alias for mesh\n        }\n});\n</code></pre>\n<p>Now, when starting the shell, you can pass in the <strong>mesh.config.js</strong> file along with your\n<strong>mesh.js</strong> file like:</p>\n<pre><code class=\"hljs language-plaintext\">mongo --shell mesh.js mesh.config.js\n</code></pre>\n<p>Or if you are using .mongorc.js:</p>\n<pre><code class=\"hljs language-plaintext\">load('mesh.js');\nload('mesh.config.js');\n</code></pre>\n<h2 id=\"usage\">Usage</h2>\n<p>coming soon</p>\n<h2 id=\"for-developers\">For Developers</h2>\n<h4 id=\"getting-the-code\">Getting The Code</h4>\n<pre><code class=\"hljs language-plaintext\">git clone git://github.com/skratchdot/mesh.git\ncd mesh\ngit submodule update --init --recursive\n</code></pre>\n<h4 id=\"updating-submodule-sources\">Updating submodule sources</h4>\n<pre><code class=\"hljs language-plaintext\">git submodule foreach git pull\n</code></pre>\n<h4 id=\"building-meshjs\">Building mesh.js</h4>\n<pre><code class=\"hljs language-plaintext\">npm install\ngrunt\n</code></pre>\n<h2 id=\"version-history\">Version History</h2>\n<h4 id=\"v150---released-september-25-2013\">v1.5.0 - Released September 25, 2013</h4>\n<ul>\n<li>using grunt.js as the build system</li>\n<li>adding <a href=\"https://github.com/skratchdot/mesh/blob/master/src/mesh.idrange.js\">mesh.idrange.js</a> - search collections\nfor documents with ids created between 2 datetimes</li>\n<li>adding <a href=\"https://github.com/skratchdot/mesh/blob/master/src/mesh.sizeinfo.js\">mesh.sizeinfo.js</a> -\nreports the count/sum/avg/max/min of all bson sizes for the given query/collection.</li>\n<li>updating the following libraries: <a href=\"https://github.com/douglascrockford/JSON-js\">JSON-js</a>,\n<a href=\"http://momentjs.com/\">moment</a>, <a href=\"http://documentcloud.github.com/underscore/\">underscore.js</a>,\n<a href=\"http://epeli.github.com/underscore.string/\">underscore.string.js</a></li>\n</ul>\n<h4 id=\"v143---released-march-7-2013\">v1.4.3 - Released March 7, 2013</h4>\n<ul>\n<li>adding mesh.ops which prints all operations.</li>\n<li>no longer printing version when tabbing.</li>\n<li>updating the following libraries: <a href=\"https://github.com/douglascrockford/JSON-js\">JSON-js</a>,\n<a href=\"http://momentjs.com/\">moment</a>, <a href=\"https://www.skratchdot.com/projects/mongodb-distinct2/\">distinct2()</a>,\n<a href=\"https://www.skratchdot.com/projects/mongodb-schema/\">schema()</a>, and\n<a href=\"http://documentcloud.github.com/underscore/\">underscore.js</a></li>\n</ul>\n<h4 id=\"v142---released-february-7-2013\">v1.4.2 - Released February 7, 2013</h4>\n<ul>\n<li>updating the following libraries: <a href=\"http://momentjs.com/\">moment</a>,\n<a href=\"https://github.com/jasondavies/science.js\">science.js</a>,\n<a href=\"http://documentcloud.github.com/underscore/\">underscore.js</a>, and\n<a href=\"http://epeli.github.com/underscore.string/\">underscore.string.js</a></li>\n</ul>\n<h4 id=\"v141---released-december-10-2012\">v1.4.1 - Released December 10, 2012</h4>\n<ul>\n<li>adding <a href=\"https://github.com/skratchdot/mesh/blob/master/src/mongodb.insertArray.js\">DBCollection.insertArray()</a></li>\n<li>adding <a href=\"https://github.com/douglascrockford/JSON-js\">JSON-js</a> - json2.js and cycle.js</li>\n<li>updating <a href=\"https://www.skratchdot.com/projects/mongodb-distinct2/\">distinct2()</a>,\n<a href=\"http://documentcloud.github.com/underscore/\">underscore.js</a>, and\n<a href=\"http://momentjs.com/\">moment.js</a></li>\n</ul>\n<h4 id=\"v140---released-december-9-2012\">v1.4.0 - Released December 9, 2012</h4>\n<ul>\n<li>updating <a href=\"https://www.skratchdot.com/projects/mongodb-distinct2/\">distinct2()</a></li>\n<li>adding some <a href=\"https://github.com/skratchdot/snippets/tree/master/underscore.js/\">underscore.js mixins</a><ul>\n<li><a href=\"https://github.com/skratchdot/snippets/tree/master/underscore.js/underscore.aggregate.js\">underscore.aggregate.js</a></li>\n<li><a href=\"https://github.com/skratchdot/snippets/tree/master/underscore.js/underscore.avg.js\">underscore.avg.js</a></li>\n<li><a href=\"https://github.com/skratchdot/snippets/tree/master/underscore.js/underscore.deepExtend.js\">underscore.deepExtend.js</a></li>\n<li><a href=\"https://github.com/skratchdot/snippets/tree/master/underscore.js/underscore.deepPluck.js\">underscore.deepPluck.js</a></li>\n<li><a href=\"https://github.com/skratchdot/snippets/tree/master/underscore.js/underscore.keyToObject.js\">underscore.keyToObject.js</a></li>\n<li><a href=\"https://github.com/skratchdot/snippets/tree/master/underscore.js/underscore.stdev.js\">underscore.stdev.js</a></li>\n<li><a href=\"https://github.com/skratchdot/snippets/tree/master/underscore.js/underscore.sum.js\">underscore.sum.js</a></li>\n<li><a href=\"https://github.com/skratchdot/snippets/tree/master/underscore.js/underscore.variance.js\">underscore.variance.js</a></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"v131---released-november-15-2012\">v1.3.1 - Released November 15, 2012</h4>\n<ul>\n<li>adding mesh.setAliases()</li>\n<li>removing globalTid and globalOid from mesh.config in favor of using 'aliases'.</li>\n<li>mesh.tid() now accepts an optional \"increment\" argument</li>\n<li>reload mesh each time load('mesh.js') is called</li>\n<li>fixing build process (version and date replaced)</li>\n<li>fixing bug w/ how hostname is determined in prompt</li>\n<li>removing moment() / window hack</li>\n</ul>\n<h4 id=\"v130---released-november-13-2012\">v1.3.0 - Released November 13, 2012</h4>\n<ul>\n<li>updating libraries: <a href=\"http://momentjs.com/\">moment.js</a>,\n<a href=\"https://www.skratchdot.com/projects/mongodb-distinct2/\">distinct2()</a>,\n<a href=\"http://documentcloud.github.com/underscore/\">underscore.js</a>, and\n<a href=\"http://epeli.github.com/underscore.string/\">underscore.string.js</a></li>\n<li>adding mesh.oid() - a wrapper for ObjectId()</li>\n<li>adding mesh.tid() - a wrapper for creating ObjectId values based on a timestamp</li>\n<li>config values to change mesh.tid() to t() or mesh.oid() to o()</li>\n</ul>\n<h4 id=\"v124---released-october-22-2012\">v1.2.4 - Released October 22, 2012</h4>\n<ul>\n<li>updating libraries: <a href=\"https://www.skratchdot.com/projects/mongodb-flatten/\">flatten()</a>\nand <a href=\"http://documentcloud.github.com/underscore/\">underscore.js</a></li>\n</ul>\n<h4 id=\"v123---released-october-21-2012\">v1.2.3 - Released October 21, 2012</h4>\n<ul>\n<li>updating libraries: <a href=\"https://www.skratchdot.com/projects/mongodb-flatten/\">flatten()</a></li>\n</ul>\n<h4 id=\"v122---released-october-20-2012\">v1.2.2 - Released October 20, 2012</h4>\n<ul>\n<li>updating libraries: <a href=\"https://www.skratchdot.com/projects/mongodb-flatten/\">flatten()</a>,\n<a href=\"http://documentcloud.github.com/underscore/\">underscore.js</a>, and\n<a href=\"http://epeli.github.com/underscore.string/\">underscore.string.js</a></li>\n</ul>\n<h4 id=\"v121---released-october-7-2012\">v1.2.1 - Released October 7, 2012</h4>\n<ul>\n<li>updating libraries: <a href=\"http://momentjs.com/\">moment.js</a>,\n<a href=\"https://www.skratchdot.com/projects/mongodb-distinct2/\">distinct2()</a>, and\n<a href=\"http://documentcloud.github.com/underscore/\">underscore.js</a></li>\n<li><a href=\"https://github.com/douglascrockford/JSON-js\">json2.js</a> is now included due\nto the <a href=\"https://www.skratchdot.com/projects/mongodb-distinct2/\">distinct2()</a> upgrade</li>\n</ul>\n<h4 id=\"v120---released-september-24-2012\">v1.2.0 - Released September 24, 2012</h4>\n<ul>\n<li>mesh.setPrompt() is now mesh.prompt()</li>\n<li>updating libraries</li>\n<li>adding mesh.time() which displays function execution times</li>\n</ul>\n<h4 id=\"v114---released-august-20-2012\">v1.1.4 - Released August 20, 2012</h4>\n<ul>\n<li>removing <a href=\"http://sugarjs.com/\">Sugar</a> (rely on <a href=\"http://documentcloud.github.com/underscore/\">underscore.js</a> instead)</li>\n<li>updating submodules</li>\n</ul>\n<h4 id=\"v113---released-august-16-2012\">v1.1.3 - Released August 16, 2012</h4>\n<ul>\n<li>adding <a href=\"https://github.com/jasondavies/science.js\">science.js</a></li>\n</ul>\n<h4 id=\"v112---released-august-16-2012\">v1.1.2 - Released August 16, 2012</h4>\n<ul>\n<li>Mix in non-conflicting string functions to the Underscore namespace</li>\n<li>adding <a href=\"http://sugarjs.com/\">Sugar</a></li>\n<li>using minified version of <a href=\"http://momentjs.com/\">moment.js</a></li>\n</ul>\n<h4 id=\"v111---released-august-16-2012\">v1.1.1 - Released August 16, 2012</h4>\n<ul>\n<li>Updating submodules</li>\n<li>Updating README.md with \"What's Included?\" descriptions</li>\n<li>Updating README.md with \"For Deveopers\" section</li>\n<li>Small fix to <a href=\"https://www.skratchdot.com/projects/mongodb-distinct2/\">distinct2.js</a></li>\n</ul>\n<h4 id=\"v110---released-august-15-2012\">v1.1.0 - Released August 15, 2012</h4>\n<ul>\n<li>Adding <a href=\"https://www.skratchdot.com/projects/mongodb-distinct2/\">distinct2.js</a></li>\n<li>implementing mesh.toString() so the console prints help info</li>\n</ul>\n<h4 id=\"v100---released-july-17-2012\">v1.0.0 - Released July 17, 2012</h4>\n<ul>\n<li>Initial Release</li>\n</ul>\n","frontmatter":{"layout":"page","title":"mesh: MongoDB Extended Shell"}},"__N_SSG":true}