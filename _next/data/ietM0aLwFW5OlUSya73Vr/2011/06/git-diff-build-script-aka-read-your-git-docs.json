{"pageProps":{"post":{"year":"2011","month":"06","day":"05","slug":"git-diff-build-script-aka-read-your-git-docs","filename":"2011-06-05-git-diff-build-script-aka-read-your-git-docs.md","html":"<p>When working in SVN, I have a batch script I've used in the past to create \"DEPLOY\" and \"RESTORE\" folders off of diffs between branches. The script will create a \"DEPLOY\" folder containing all <b>added</b> and <b>modified</b> files, and a \"RESTORE\" folder containing all <b>modified</b> files.</p>\n<p>The purpose of this, is to deploy a set of files to a different environment. I can just copy the \"DEPLOY\" folder to any number of servers. If there is a bug that made it through QA, and we need to immediately rollback changes, we can just copy the \"RESTORE\" folder to all the same servers.</p>\n<p>I just wrote a similar script for Git: <a href=\"https://github.com/skratchdot/Git-Diff-Build-Script\">Git-Diff-Build-Script</a></p>\n<p>While writing that script, I didn't read the Git docs closely enough, and missed the \"git diff\" <b>--diff-filter</b> parameter. Because of this, I thought I would have to use AWK to sanitize my list of files, but then I read about the <b>--diff-filter</b> parameter, and changed 2 lines of code to 1:</p>\n<p><u>USING AWK:</u></p>\n<pre><code class=\"hljs language-bash\">info=<span class=\"hljs-string\">\"<span class=\"hljs-subst\">$(git diff origin/prod origin/dev --name-status)</span>\"</span>\nfiles=<span class=\"hljs-string\">\"<span class=\"hljs-subst\">$(echo <span class=\"hljs-string\">\"<span class=\"hljs-variable\">$info</span>\"</span> | awk '$1 ~/M|A/ {print $2}')</span>\"</span>\n</code></pre>\n<p><u>USING diff-filter:</u></p>\n<pre><code class=\"hljs language-bash\">files=<span class=\"hljs-string\">\"<span class=\"hljs-subst\">$(git diff origin/prod origin/dev --name-only --diff-filter=MA)</span>\"</span>\n</code></pre>\n","frontmatter":{"layout":"post","title":"Git Diff Build Script (AKA read your Git docs)","categories":["Git","Bash","Shell"],"tags":["Ant","AWK","Bash","Shell","Git","SVN"]}},"previousTitle":"SerializeJSON() in ColdFusion with Unicode Characters","previousUrl":"/2011/05/serializejson-in-coldfusion-with-unicode-characters","nextTitle":"domFormat - v1.0 (Released July 25, 2011)","nextUrl":"/2011/07/domformat-v1-0-released-july-25-2011"},"__N_SSG":true}