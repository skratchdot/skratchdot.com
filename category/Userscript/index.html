<!DOCTYPE html><html><head><meta charSet="utf-8"/><title>Category &quot;Userscript&quot; » skratchdot.com</title><link rel="apple-touch-icon" sizes="57x57" href="/images/favicons/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" sizes="114x114" href="/images/favicons/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon" sizes="72x72" href="/images/favicons/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="60x60" href="/images/favicons/apple-touch-icon-60x60.png"/><link rel="apple-touch-icon" sizes="120x120" href="/images/favicons/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="76x76" href="/images/favicons/apple-touch-icon-76x76.png"/><meta name="apple-mobile-web-app-title" content="skratchdot"/><link rel="icon" type="image/png" href="/images/favicons/favicon-96x96.png" sizes="96x96"/><link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16"/><link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="msapplication-TileColor" content="#da532c"/><meta name="application-name" content="skratchdot"/><meta name="generator" content="NextJS"/><link rel="alternate" type="application/atom+xml" title="Atom Feed for skratchdot.com" href="/atom.xml"/><link rel="alternate" type="application/rss+xml" title="RSS Feed for skratchdot.com" href="/feed.xml"/><link rel="alternate" type="application/feed+json" title="JSON Feed for skratchdot.com" href="/feed.json"/><meta name="next-head-count" content="19"/><link rel="preload" href="/_next/static/css/9f6844b18498e4a4.css" as="style"/><link rel="stylesheet" href="/_next/static/css/9f6844b18498e4a4.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-514908bffb652963.js" defer=""></script><script src="/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/_next/static/chunks/main-682b8586cd82cc4e.js" defer=""></script><script src="/_next/static/chunks/pages/_app-4d21e19fd58c130c.js" defer=""></script><script src="/_next/static/chunks/31-c97ffeae2ceece59.js" defer=""></script><script src="/_next/static/chunks/498-df057dfa1b7a1e4f.js" defer=""></script><script src="/_next/static/chunks/pages/category/%5Bcategory%5D-f7e402f817627528.js" defer=""></script><script src="/_next/static/ietM0aLwFW5OlUSya73Vr/_buildManifest.js" defer=""></script><script src="/_next/static/ietM0aLwFW5OlUSya73Vr/_ssgManifest.js" defer=""></script><script src="/_next/static/ietM0aLwFW5OlUSya73Vr/_middlewareManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><div class="hrRed"></div><div class="hrBlack"></div><header class="oneColumn"><h1><a href="/">[skratchdot<span>.</span>]</a></h1></header><nav id="mainNav" class="oneColumn"><ul><li><a title="Home" href="/"><span>[</span>Home<span>]</span></a></li><li><a title="Projects" href="/projects/"><span>[</span>Projects<span>]</span></a></li><li><a title="Contact" href="/contact/"><span>[</span>Contact<span>]</span></a></li></ul></nav><br/><section id="mainSection" class="oneColumn"><article><h1>Category &quot;Userscript&quot;<!-- -->:</h1><ul class="postlist"><li><div class="clearfix rel"><div class="pl-date">2013<!-- -->-<!-- -->05<!-- -->-<!-- -->19</div><div class="pl-title"><a href="/2013/05/userscripts-and-content-security-policy/">Userscripts and Content Security Policy</a></div><div class="pl-comments"><a href="/2013/05/userscripts-and-content-security-policy/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="/2013/05/userscripts-and-content-security-policy" data-disqus-url="/2013/05/userscripts-and-content-security-policy">Comments</span></a></div></div><div class="clearfix sublist"><div class="sublist-title"><strong><em>Categories<!-- -->:</em></strong></div><div><a href="/category/Userscript/">Userscript</a>, <a href="/category/Javascript/">Javascript</a></div></div><div class="clearfix sublist"><div class="sublist-title"><strong><em>Tags<!-- -->:</em></strong></div><div><a href="/tag/Userscript/">Userscript</a>, <a href="/tag/Javascript/">Javascript</a>, <a href="/tag/Git/">Git</a>, <a href="/tag/Github/">Github</a>, <a href="/tag/CSP/">CSP</a></div></div></li><li><div class="clearfix rel"><div class="pl-date">2013<!-- -->-<!-- -->05<!-- -->-<!-- -->19</div><div class="pl-title"><a href="/2013/05/github-enhancement-suite/">Github Enhancement Suite</a></div><div class="pl-comments"><a href="/2013/05/github-enhancement-suite/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="/2013/05/github-enhancement-suite" data-disqus-url="/2013/05/github-enhancement-suite">Comments</span></a></div></div><div class="clearfix sublist"><div class="sublist-title"><strong><em>Categories<!-- -->:</em></strong></div><div><a href="/category/Userscript/">Userscript</a>, <a href="/category/Javascript/">Javascript</a></div></div><div class="clearfix sublist"><div class="sublist-title"><strong><em>Tags<!-- -->:</em></strong></div><div><a href="/tag/Userscript/">Userscript</a>, <a href="/tag/Javascript/">Javascript</a>, <a href="/tag/Git/">Git</a>, <a href="/tag/Github/">Github</a>, <a href="/tag/Projects/">Projects</a></div></div></li><li><div class="clearfix rel"><div class="pl-date">2012<!-- -->-<!-- -->12<!-- -->-<!-- -->08</div><div class="pl-title"><a href="/2012/12/userscript-github-editor-theme/">Userscript - Github: Editor Theme</a></div><div class="pl-comments"><a href="/2012/12/userscript-github-editor-theme/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="/2012/12/userscript-github-editor-theme" data-disqus-url="/2012/12/userscript-github-editor-theme">Comments</span></a></div></div><div class="clearfix sublist"><div class="sublist-title"><strong><em>Categories<!-- -->:</em></strong></div><div><a href="/category/Userscript/">Userscript</a>, <a href="/category/Javascript/">Javascript</a></div></div><div class="clearfix sublist"><div class="sublist-title"><strong><em>Tags<!-- -->:</em></strong></div><div><a href="/tag/Userscript/">Userscript</a>, <a href="/tag/Javascript/">Javascript</a>, <a href="/tag/Git/">Git</a>, <a href="/tag/Github/">Github</a>, <a href="/tag/Projects/">Projects</a></div></div></li><li><div class="clearfix rel"><div class="pl-date">2012<!-- -->-<!-- -->08<!-- -->-<!-- -->12</div><div class="pl-title"><a href="/2012/08/userscript-github-get-missing-descriptions/">Userscript - Github: Get Missing Descriptions</a></div><div class="pl-comments"><a href="/2012/08/userscript-github-get-missing-descriptions/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="/2012/08/userscript-github-get-missing-descriptions" data-disqus-url="/2012/08/userscript-github-get-missing-descriptions">Comments</span></a></div></div><div class="clearfix sublist"><div class="sublist-title"><strong><em>Categories<!-- -->:</em></strong></div><div><a href="/category/Userscript/">Userscript</a>, <a href="/category/Javascript/">Javascript</a></div></div><div class="clearfix sublist"><div class="sublist-title"><strong><em>Tags<!-- -->:</em></strong></div><div><a href="/tag/Userscript/">Userscript</a>, <a href="/tag/Javascript/">Javascript</a>, <a href="/tag/Git/">Git</a>, <a href="/tag/Github/">Github</a>, <a href="/tag/Projects/">Projects</a></div></div></li><li><div class="clearfix rel"><div class="pl-date">2012<!-- -->-<!-- -->08<!-- -->-<!-- -->04</div><div class="pl-title"><a href="/2012/08/can&#x27;t-install-userscripts-in-chrome-21+/">Can&#x27;t Install Userscripts in Chrome 21+</a></div><div class="pl-comments"><a href="/2012/08/can&#x27;t-install-userscripts-in-chrome-21+/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="/2012/08/can&#x27;t-install-userscripts-in-chrome-21+" data-disqus-url="/2012/08/can&#x27;t-install-userscripts-in-chrome-21+">Comments</span></a></div></div><div class="clearfix sublist"><div class="sublist-title"><strong><em>Categories<!-- -->:</em></strong></div><div><a href="/category/Userscript/">Userscript</a></div></div><div class="clearfix sublist"><div class="sublist-title"><strong><em>Tags<!-- -->:</em></strong></div><div><a href="/tag/Userscript/">Userscript</a>, <a href="/tag/Chrome/">Chrome</a></div></div></li><li><div class="clearfix rel"><div class="pl-date">2012<!-- -->-<!-- -->07<!-- -->-<!-- -->05</div><div class="pl-title"><a href="/2012/07/userscript-github-twitter-link/">Userscript - Github: Twitter Link</a></div><div class="pl-comments"><a href="/2012/07/userscript-github-twitter-link/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="/2012/07/userscript-github-twitter-link" data-disqus-url="/2012/07/userscript-github-twitter-link">Comments</span></a></div></div><div class="clearfix sublist"><div class="sublist-title"><strong><em>Categories<!-- -->:</em></strong></div><div><a href="/category/Userscript/">Userscript</a>, <a href="/category/Javascript/">Javascript</a></div></div><div class="clearfix sublist"><div class="sublist-title"><strong><em>Tags<!-- -->:</em></strong></div><div><a href="/tag/Userscript/">Userscript</a>, <a href="/tag/Javascript/">Javascript</a>, <a href="/tag/Git/">Git</a>, <a href="/tag/Github/">Github</a>, <a href="/tag/Twitter/">Twitter</a>, <a href="/tag/Projects/">Projects</a></div></div></li></ul></article><nav id="articlesNav"><div><div class="newEntries"></div><div class="oldEntries"></div></div><div class="homeEntries"><a href="/">HOME</a></div></nav></section><div class="footerSpacer"><br/></div><footer class="oneColumn"><div>Copyright © <!-- -->2022<!-- --> <a href="/">skratchdot</a><span class="hspace">•</span>Validate:  <a href="https://validator.w3.org/nu/?doc=https%3A%2F%2Fwww.skratchdot.com%2Fcategory%2FUserscript%2F">HTML5</a><span class="hspace">•</span><a class="noBorder" href="/atom.xml"><img src="/images/feed-icon-14x14.png" alt="RSS/Atom Feed" width="14" height="14" style="top:2px"/></a><span class="hspace">•</span><div class="twitter-button"><a class="twitter-button-link" target="_blank" aria-label="Follow @skratchdot on Twitter" title="Follow @skratchdot on Twitter" href="https://twitter.com/intent/user?screen_name=skratchdot"><i></i><span>Follow <b>@skratchdot</b></span></a></div></div></footer><a href="https://github.com/skratchdot" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#c80000;color:#000;position:absolute;top:0;border:0;right:0"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path><path d="M10,10 L115,115 L250,250 Z" stroke="black" stroke-width="6"></path></svg></a><div id="homepage_link"><a style="border:0" href="/"><img src="/favicon.ico" alt="skratchdot" width="16" height="16"/></a></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"year":"2013","month":"05","day":"19","slug":"userscripts-and-content-security-policy","filename":"2013-05-19-userscripts-and-content-security-policy.md","html":"\u003cp\u003eLast month, Github started to include some\n\u003ca href=\"https://en.wikipedia.org/wiki/Content_Security_Policy\"\u003eContent Security Policy Headers\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eThey wrote a \u003ca href=\"https://github.com/blog/1477-content-security-policy\"\u003eblog post\u003c/a\u003e describing\nthe problems CSP headers try to solve, how to prepare your app for including the headers,\nand listed some of the current limitations you may encounter when using the headers.\u003c/p\u003e\n\u003cp\u003eI've ran into some of these limitations with the Github userscripts I've authored.\u003c/p\u003e\n\u003cp\u003eFirst off, to make a cross browser userscript, there are a few problems that I've ran into.\nIf your userscript needs to access variables on a page, you can use a few techniques:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://wiki.greasespot.net/UnsafeWindow\"\u003eUnsafe Window\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://wiki.greasespot.net/Location_hack\"\u003eLocation Hack\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://wiki.greasespot.net/Content_Script_Injection\"\u003eContent Script Injection\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eOf these three, \u003cstrong\u003eContent Script Injection\u003c/strong\u003e is the preferred method. It works for both\nFirefox and Chrome. I've been using a variation of that method for most of the scripts I've\nwritten in the past.\u003c/p\u003e\n\u003cp\u003eHere's how I would typically write my scripts:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-comment\"\u003e// Create some js that you want to inject into the page\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e main = \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {};\n\n\u003cspan class=\"hljs-comment\"\u003e// Inject our main script into the page\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e script = \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreateElement\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'script'\u003c/span\u003e);\nscript.\u003cspan class=\"hljs-property\"\u003etextContent\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e'('\u003c/span\u003e + main.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e() + \u003cspan class=\"hljs-string\"\u003e')();'\u003c/span\u003e;\n\u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eappendChild\u003c/span\u003e(script);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAfter Github started sending CSP headers, my userscripts broke by throwing errors like:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-plaintext\"\u003eCSP ERROR:  Couldn't parse invalid source 'unsafe-inline'\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo fix Firefox, I temporarily removed the \u003cstrong\u003eContent Script Injection\u003c/strong\u003e hacks I was using. Here's\nan example commit I made back in April:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/skratchdot/github-repo-counts.user.js/commit/80f77bc3d588ef5fcd411a3dc77062166b091713\"\u003ehttps://github.com/skratchdot/github-repo-counts.user.js/commit/80f77bc3d588ef5fcd411a3dc77062166b091713\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eWhat I forgot when making those commits, is that Chrome userscripts do not work the same way as\nFirefox userscripts.\u003c/p\u003e\n\u003cp\u003eTo make Chrome userscripts work, I \u003cem\u003eneeded\u003c/em\u003e to use \u003cstrong\u003eContent Script Injection\u003c/strong\u003e. The issue is that\nGithub is sending the following CSP headers:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-plaintext\"\u003ex-content-security-policy: default-src *; script-src https://github.com https://a248.e.akamai.net https://jobs.github.com https://ssl.google-analytics.com https://secure.gaug.es https://collector.githubapp.com https://gist.github.com; style-src https://github.com https://a248.e.akamai.net 'unsafe-inline'; object-src https://github.com https://a248.e.akamai.net\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf you notice, I can only use the \u003cstrong\u003eContent Script Injection\u003c/strong\u003e method from the following domains:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com\"\u003ehttps://github.com\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://a248.e.akamai.net\"\u003ehttps://a248.e.akamai.net\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://jobs.github.com\"\u003ehttps://jobs.github.com\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://ssl.google-analytics.com\"\u003ehttps://ssl.google-analytics.com\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://secure.gaug.es\"\u003ehttps://secure.gaug.es\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://collector.githubapp.com\"\u003ehttps://collector.githubapp.com\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://gist.github.com\"\u003ehttps://gist.github.com\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eI had been hotlinking my scripts from the raw.github.com domain.\u003c/p\u003e\n\u003cp\u003eTo fix, I started hosting my scripts in a \u003ca href=\"https://gist.github.com/skratchdot/5604120\"\u003eGist\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eSince Firefox supports the @require userscript annotation, I rely on that. For Chrome, I am using\n\u003cstrong\u003eContent Script Injection\u003c/strong\u003e. The reason I didn't use \u003cstrong\u003eContent Script Injection\u003c/strong\u003e for Firefox, is\nbecause @require does some caching, and I was also experiencing some weird behavior in Firefox in\nwhich certain requests to \u003ca href=\"https://gist.github.com/\"\u003egist.github.com\u003c/a\u003e were returning no content\n(0 byte requests)- and my scripts weren't working.\u003c/p\u003e\n\u003cp\u003eI haven't experienced that behavior with Chrome requests.\u003c/p\u003e\n\u003cp\u003eAnother method I was toying with, is by injecting the scripts via an iframe. Go to any\n\u003ca href=\"https://github.com/\"\u003egithub.com\u003c/a\u003e page, and run the following code in Chrome's console:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e injectViaScript = \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003efn\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e script = \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreateElement\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'script'\u003c/span\u003e);\n  script.\u003cspan class=\"hljs-property\"\u003etextContent\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e'('\u003c/span\u003e + fn.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e() + \u003cspan class=\"hljs-string\"\u003e'());'\u003c/span\u003e;\n  \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eappendChild\u003c/span\u003e(script);\n  \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eremoveChild\u003c/span\u003e(script);\n};\n\n\u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e injectViaIframe = \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003efn\u003c/span\u003e) {\n  \u003cspan class=\"hljs-keyword\"\u003evar\u003c/span\u003e fnName = \u003cspan class=\"hljs-string\"\u003e'dynamic_fn_'\u003c/span\u003e + \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eDate\u003c/span\u003e().\u003cspan class=\"hljs-title function_\"\u003egetTime\u003c/span\u003e(),\n    iframe = \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003ecreateElement\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'iframe'\u003c/span\u003e);\n  iframe.\u003cspan class=\"hljs-property\"\u003eonload\u003c/span\u003e = \u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n    parent.\u003cspan class=\"hljs-property\"\u003ewindow\u003c/span\u003e[fnName] = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eFunction\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'('\u003c/span\u003e + fn.\u003cspan class=\"hljs-title function_\"\u003etoString\u003c/span\u003e() + \u003cspan class=\"hljs-string\"\u003e'());'\u003c/span\u003e);\n    parent.\u003cspan class=\"hljs-property\"\u003ewindow\u003c/span\u003e[fnName]();\n    parent.\u003cspan class=\"hljs-property\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eremoveChild\u003c/span\u003e(iframe);\n  };\n  \u003cspan class=\"hljs-variable language_\"\u003edocument\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003ebody\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eappendChild\u003c/span\u003e(iframe);\n};\n\n\u003cspan class=\"hljs-comment\"\u003e// This will throw an error\u003c/span\u003e\n\u003cspan class=\"hljs-title function_\"\u003einjectViaScript\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-title function_\"\u003ealert\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Hello from script!'\u003c/span\u003e);\n});\n\n\u003cspan class=\"hljs-comment\"\u003e// This will work\u003c/span\u003e\n\u003cspan class=\"hljs-title function_\"\u003einjectViaIframe\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) {\n  \u003cspan class=\"hljs-title function_\"\u003ealert\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'Hello from iframe!'\u003c/span\u003e);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThat seemed like an approach I could take, but was running into scoping issues, so\ngave up trying. I ended up settling on the @require method for Firefox, and the\n\u003cstrong\u003eContent Script Injection\u003c/strong\u003e from \u003ca href=\"https://gist.github.com/\"\u003egist.github.com\u003c/a\u003e for Chrome.\u003c/p\u003e\n","frontmatter":{"layout":"post","title":"Userscripts and Content Security Policy","published":true,"categories":["Userscript","Javascript"],"tags":["Userscript","Javascript","Git","Github","CSP"]}},{"year":"2013","month":"05","day":"19","slug":"github-enhancement-suite","filename":"2013-05-19-github-enhancement-suite.md","html":"\u003cp\u003eI've created quite a few \u003ca href=\"https://github.com\"\u003eGithub\u003c/a\u003e userscripts to help enhance my experience\nwhen checking out code online. The scripts either add functionality I wish existed, functionality\nI've seen other people request, or functionality that once existed but was removed.\u003c/p\u003e\n\u003cp\u003eWith the recent \u003ca href=\"/2013/05/userscripts-and-content-security-policy/\"\u003eCSP Headers\u003c/a\u003e that were added\nto the site, I had to make changes to all my scripts. Since it is starting to be a pain to manage\nso many scripts, and it's even a bigger pain for people if they want to install all of them,\nI've consolidated them all into one script:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/skratchdot/github-enhancement-suite\"\u003eThe Github Enhancement Suite\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eEventually, I might make this a legitimate browser extension, and add functionality for turning\nfeatures on and off. I'll also probably clean up the code, and decommission the \"one off\" scripts.\u003c/p\u003e\n\u003cp\u003eAt the time of this writing, here are the scripts that are included:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/skratchdot/github-code-search.user.js\"\u003eGithub: Code Search\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/skratchdot/github-editor-theme.user.js\"\u003eGithub: Editor Theme\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/skratchdot/github-fork-count.user.js\"\u003eGithub: Fork Count\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/skratchdot/github-get-missing-descriptions.user.js\"\u003eGithub: Get Missing Descriptions\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/skratchdot/github-gh-pages-link.user.js\"\u003eGithub: gh-pages Link\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/skratchdot/github-pull-request-links.user.js\"\u003eGithub: Pull Request Links\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/skratchdot/github-repo-counts.user.js\"\u003eGithub: Repo Counts\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/skratchdot/github-repo-filter-info.user.js\"\u003eGithub: Repo Filter Info\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/skratchdot/github-twitter-link.user.js\"\u003eGithub: Twitter Link\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n","frontmatter":{"layout":"post","title":"Github Enhancement Suite","published":true,"categories":["Userscript","Javascript"],"tags":["Userscript","Javascript","Git","Github","Projects"]}},{"year":"2012","month":"12","day":"08","slug":"userscript-github-editor-theme","filename":"2012-12-08-userscript-github-editor-theme.md","html":"\u003cp\u003eYesterday I saw the following post on \u003ca href=\"http://news.ycombinator.com/\"\u003eHackerNews\u003c/a\u003e:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://news.ycombinator.com/item?id=4886560\"\u003eLet's make GitHub better, together\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eI saw the section on \u003ca href=\"http://letsmake.github.com/bettertogether/#ace\"\u003eRevamping Inline Editing\u003c/a\u003e,\nand noticed one of the comments was about the way \u003ca href=\"https://github.com/\"\u003eGithub\u003c/a\u003e uses the\n\u003ca href=\"https://github.com/ajaxorg/ace\"\u003eAce Editor\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eSince I've been working with \u003ca href=\"https://github.com/ajaxorg/ace\"\u003eAce\u003c/a\u003e some recently, I decided\nto work on a userscript that let's you switch themes on Github.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eYou can check it out here:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e\u003ca href=\"https://www.skratchdot.com/projects/github-editor-theme.user.js/\"\u003eProject Page\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ca href=\"https://github.com/skratchdot/github-editor-theme.user.js/\"\u003eGithub Page\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ca href=\"https://github.com/skratchdot/github-editor-theme.user.js/raw/master/github-editor-theme.user.js\"\u003eInstall\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eHere is the current description from \u003ca href=\"https://raw.github.com/skratchdot/github-editor-theme.user.js/master/README.md\"\u003eREADME.md\u003c/a\u003e:\u003c/p\u003e\n\u003ch3 id=\"description\"\u003eDescription\u003c/h3\u003e\n\u003cp\u003eAdd a \"theme\" dropdown when editing files in the Github UI.\u003c/p\u003e\n\u003ch3 id=\"screenshots\"\u003eScreenshots\u003c/h3\u003e\n\u003ch4 id=\"before-installing-the-user-script\"\u003eBefore installing the user script:\u003c/h4\u003e\n\u003cp\u003e\u003cimg src=\"https://github.com/skratchdot/github-editor-theme.user.js/raw/master/images/before.png\" alt=\"Before Installation\"\u003e\u003c/p\u003e\n\u003ch4 id=\"after-installing-the-user-script\"\u003eAfter installing the user script:\u003c/h4\u003e\n\u003cp\u003e\u003cimg src=\"https://github.com/skratchdot/github-editor-theme.user.js/raw/master/images/after.png\" alt=\"After Installation\"\u003e\u003c/p\u003e\n","frontmatter":{"layout":"post","title":"Userscript - Github: Editor Theme","categories":["Userscript","Javascript"],"tags":["Userscript","Javascript","Git","Github","Projects"]}},{"year":"2012","month":"08","day":"12","slug":"userscript-github-get-missing-descriptions","filename":"2012-08-12-userscript-github-get-missing-descriptions.md","html":"\u003cp\u003eOn \u003ca href=\"https://github.com\"\u003eGithub\u003c/a\u003e profiles, not all the repositories\nhave description info listed underneath them. Only the repositories\nwith recent updates contain detailed information.\u003c/p\u003e\n\u003cp\u003eThis is necessary for users with a large number of repos so that page\nload times are acceptable (also, there's no need to show all repo info\nfor someone with 1000+ repos).\u003c/p\u003e\n\u003cp\u003eTo find out more about older repositories, you have to visit each repo page.\u003c/p\u003e\n\u003cp\u003eTo help out with this manual process, I've created:\n\u003ca href=\"https://github.com/skratchdot/github-get-missing-descriptions.user.js/\"\u003eGithub: Get Missing Descriptions\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eThis script adds a button that will update \"simple\" repo listings with the\nproject's description, as well as the last time it was updated. Each button\nclick will make a max of 50 ajax requests. If there are more than 50 repos without\ndescriptions, you will have to click the button multiple times.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eYou can check it out here:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e\u003ca href=\"https://www.skratchdot.com/projects/github-get-missing-descriptions.user.js/\"\u003eProject Page\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ca href=\"https://github.com/skratchdot/github-get-missing-descriptions.user.js/\"\u003eGithub Page\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ca href=\"https://github.com/skratchdot/github-get-missing-descriptions.user.js/raw/master/github-get-missing-descriptions.user.js\"\u003eInstall\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eHere is the current description from \u003ca href=\"https://raw.github.com/skratchdot/github-get-missing-descriptions.user.js/master/README.md\"\u003eREADME.md\u003c/a\u003e:\u003c/p\u003e\n\u003ch3 id=\"description\"\u003eDescription\u003c/h3\u003e\n\u003cp\u003eIf there are missing descriptions on a Github profile page,\na button will be added. When clicked, ajax requests will be made\nto grab the descriptions.\u003c/p\u003e\n\u003ch3 id=\"screenshots\"\u003eScreenshots\u003c/h3\u003e\n\u003ch4 id=\"before-installing-the-user-script\"\u003eBefore installing the user script:\u003c/h4\u003e\n\u003cp\u003e\u003cimg src=\"https://github.com/skratchdot/github-get-missing-descriptions.user.js/raw/master/images/before.png\" alt=\"Before Installation\"\u003e\u003c/p\u003e\n\u003ch4 id=\"after-installing-the-user-script\"\u003eAfter installing the user script:\u003c/h4\u003e\n\u003cp\u003e\u003cstrong\u003eBefore clicking the button:\u003c/strong\u003e\u003cbr\u003e\u003cimg src=\"https://github.com/skratchdot/github-get-missing-descriptions.user.js/raw/master/images/after1.png\" alt=\"After Installation (before clicking the button)\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eAfter clicking the button:\u003c/strong\u003e\u003cbr\u003e\u003cimg src=\"https://github.com/skratchdot/github-get-missing-descriptions.user.js/raw/master/images/after2.png\" alt=\"After Installation (after clicking the button)\"\u003e\u003c/p\u003e\n","frontmatter":{"layout":"post","title":"Userscript - Github: Get Missing Descriptions","categories":["Userscript","Javascript"],"tags":["Userscript","Javascript","Git","Github","Projects"]}},{"year":"2012","month":"08","day":"04","slug":"can't-install-userscripts-in-chrome-21+","filename":"2012-08-04-can't-install-userscripts-in-chrome-21+.md","html":"\u003cp\u003eToday I was updating one of my \u003ca href=\"https://github.com/skratchdot/github-repo-filter-info.user.js/\"\u003euserscripts\u003c/a\u003e,\nbut when I went to test my changes in Chrome, I saw the following warning:\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/posts/2012/08/04/userscripts.png\" alt=\"Chrome Userscript / Extension Warning Message\"\u003e\u003c/p\u003e\n\u003cp\u003eThe \u003ca href=\"http://www.chromium.org/administrators/policy-list-3#ExtensionInstallSources\"\u003elearn more\u003c/a\u003e\nlink took me to this page:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://www.chromium.org/administrators/policy-list-3#ExtensionInstallSources\"\u003ehttp://www.chromium.org/administrators/policy-list-3#ExtensionInstallSources\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eFollowing the directions for OSX, I tried adding the \u003cstrong\u003eExtensionInstallSources\u003c/strong\u003e preference\nvia the command line:\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eChrome:\u003c/em\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-plaintext\"\u003edefaults write com.google.Chrome ExtensionInstallSources -array \"https://github.com/skratchdot/*\"\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cem\u003eChrome Canary:\u003c/em\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-plaintext\"\u003edefaults write com.google.Chrome.canary ExtensionInstallSources -array \"https://github.com/skratchdot/*\"\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI restarted Chrome, and still could not install my userscript.\u003c/p\u003e\n\u003cp\u003eAfter reading through this bug:\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"http://code.google.com/p/chromium/issues/detail?id=138054\"\u003ehttp://code.google.com/p/chromium/issues/detail?id=138054\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eI found the \u003cstrong\u003e--enable-easy-off-store-extension-install\u003c/strong\u003e switch. By using that, I was able to start\nChrome from the command line to install my userscript.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eChrome:\u003c/em\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-plaintext\"\u003e/Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome --enable-easy-off-store-extension-install\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cem\u003eChrome Canary:\u003c/em\u003e\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-plaintext\"\u003e/Applications/Google\\ Chrome\\ Canary.app/Contents/MacOS/Google\\ Chrome\\ Canary --enable-easy-off-store-extension-install\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIt would be nice if the \u003cstrong\u003e\"Tools\"-\u0026gt;\"Extensions\"\u003c/strong\u003e page (aka \u003cstrong\u003echrome://chrome/extensions/\u003c/strong\u003e)\nhad a list of whitelist/blacklist URLs that you could edit. That page allows you to enter\n\"Developer Mode\", so it makes sense to have a few more options there.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e\u003cem\u003eEDIT:\u003c/em\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eThis workaround exists as well:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eDownload the user script.\u003c/li\u003e\n\u003cli\u003eOpen \u003cstrong\u003echrome://chrome/extensions/\u003c/strong\u003e.\u003c/li\u003e\n\u003cli\u003eDrag and drop the user script file on the page you opened in step 2.\u003c/li\u003e\n\u003c/ol\u003e\n","frontmatter":{"layout":"post","title":"Can't Install Userscripts in Chrome 21+","published":true,"categories":["Userscript"],"tags":["Userscript","Chrome"]}},{"year":"2012","month":"07","day":"05","slug":"userscript-github-twitter-link","filename":"2012-07-05-userscript-github-twitter-link.md","html":"\u003cp\u003eWhile browsing \u003ca href=\"https://github.com\"\u003eGithub\u003c/a\u003e profiles, I notice I'll frequently\nchange the url from \u003ca href=\"https://github.com\"\u003egithub.com\u003c/a\u003e to \u003ca href=\"https://twitter.com\"\u003etwitter.com\u003c/a\u003e\nto see if that particular user has a \u003ca href=\"https://twitter.com\"\u003eTwitter\u003c/a\u003e account.\u003c/p\u003e\n\u003cp\u003eTo save on some of that manual activity, I created a new userscript today:\n\u003ca href=\"https://github.com/skratchdot/github-twitter-link.user.js/\"\u003eGithub: Twitter Link\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eYou can check it out here:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003cp\u003e\u003ca href=\"https://www.skratchdot.com/projects/github-twitter-link.user.js/\"\u003eProject Page\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ca href=\"https://github.com/skratchdot/github-twitter-link.user.js/\"\u003eGithub Page\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003cp\u003e\u003ca href=\"https://github.com/skratchdot/github-twitter-link.user.js/raw/master/github-twitter-link.user.js\"\u003eInstall\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eHere is the current description from \u003ca href=\"https://raw.github.com/skratchdot/github-twitter-link.user.js/master/README.md\"\u003eREADME.md\u003c/a\u003e:\u003c/p\u003e\n\u003ch3 id=\"description\"\u003eDescription\u003c/h3\u003e\n\u003cp\u003eThis is a user script that adds a twitter link on Github profile\npages if a corresponding user name exists at Twitter. It utilizes\nlocal storage to minimize multiple Twitter API requests. If a corresponding\nuser name is not found, then we will not check for it again. At some point I\nmay add a \"time limit\" on when to check again.\u003c/p\u003e\n\u003ch3 id=\"screenshots\"\u003eScreenshots\u003c/h3\u003e\n\u003ch4 id=\"before-installing-the-user-script\"\u003eBefore installing the user script:\u003c/h4\u003e\n\u003cp\u003e\u003cimg src=\"https://github.com/skratchdot/github-twitter-link.user.js/raw/master/images/before.png\" alt=\"Before Installation\"\u003e\u003c/p\u003e\n\u003ch4 id=\"after-installing-the-user-script\"\u003eAfter installing the user script:\u003c/h4\u003e\n\u003cp\u003e\u003cstrong\u003eTwitter account exists:\u003c/strong\u003e\u003cbr\u003e\u003cimg src=\"https://github.com/skratchdot/github-twitter-link.user.js/raw/master/images/after1.png\" alt=\"After Installation - Account exists\"\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eTwitter account doesn't exist:\u003c/strong\u003e\u003cbr\u003e\u003cimg src=\"https://github.com/skratchdot/github-twitter-link.user.js/raw/master/images/after2.png\" alt=\"After Installation - Account doesn't exist\"\u003e\u003c/p\u003e\n","frontmatter":{"layout":"post","title":"Userscript - Github: Twitter Link","categories":["Userscript","Javascript"],"tags":["Userscript","Javascript","Git","Github","Twitter","Projects"]}}]},"__N_SSG":true},"page":"/category/[category]","query":{"category":"Userscript"},"buildId":"ietM0aLwFW5OlUSya73Vr","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>